# 数据绑定, 表达式与控制器

从前文的介绍中可以看到, 界面的 html 中可以使用 `ng-xxx` 的属性命名一些名字. 
然后背后的对象上维护对应的属性, 即可实现前后的同步.

这样将界面中的 "名字" 与背后的对象的绑定被称之为数据的绑定. 

在界面中使用 `ng-model`, 可以实现双向数据绑定. 即*界面修改同步背后属性修改, 背后属性修改同步界面修改*.


## `ng-bind` 单向数据绑定( data-bind )

在标签中还可以使用 `ng-bind` 来实现单向的绑定. 在界面中呈现数据, 往往是以展示数据为主( 这个看项目需求, 并非绝对 ).
例如展示数据列表, 某个页面的菜单, 某个网站的站点导航等. 这些数据不需要用户修改. 一般只有在表单处理, 
或需要记录数据的时候才需要用户输入. 

所以并非每一个标签中都要使用 `ng-model`, 如果只需要单向绑定. 即背后对象属性修改, 就触发前面界面的数据修改. 
那么可以使用 `ng-bind` 指令. 

它的使用与 `ng-model` 一模一样, 唯一不同的是, 不需要写到输入框中. 例如案例: 

```html
<body ng-app="app">
    <input type="text" ng-model="name"><br>
    你好, <span ng-bind="name"></span>
    <script>
        angular.module( 'app', [] )
                .run( function ( $rootScope ) {
                    $rootScope.name = 'jim';
                });
    </script>
</body>
```

分析:
- 在 `run` 方法中初始化对象 `$rootScope` 的 `name` 属性为 `'jim'`. 

![](./imgs/2018-01-30_151026.png)

- 对属性的设置触发 ng 将数据同步到界面中.
- 页面中使用 `ng-bind` 的标签内部会使用对应的数据进行填充( 注意, 默认不允许 html 字符串 ). 使用 `ng-model` 的输入框亦会如此.

![](./imgs/2018-01-30_151139.png)

- 在前台界面的文本框中输入数据的时候, 会触发 ng 将界面的数据变化记录下来, 并通知背后的对象.
- 将数据同步到背后的 `$rootScope` 对象的 `name` 属性上.

![](./imgs/2018-01-30_151225.png)

- 由于此同步使得 `$rootScope.name` 发生变化, 又会触发一次 ng 监视同步行为. 
- 将该数据同步到界面的 `ng-bind` 所在的标签中.
- 从后向前的同步会同时发生在 `ng-bind` 和 `ng-model` 上, 但是由于此次同步的数据, 与 `ng-model` 中的数据相同, 所以不会进行数据的修改, 也就不会再发生同步逻辑. 事实上, 如果依旧有数据变化, 还是会触发一次同步逻辑. 在 ng 中这个循环会在执行到 第 10 次的时候强制终结, 并抛出一个异常. 
- 由于 `ng-bind` 是单向数据绑定, 因此在界面中它的数据变化不会触发 angular 监视行为.

![](./imgs/2018-01-30_151327.png)


在 ng 中数据绑定的案例特别多.

## 表达式( expression )